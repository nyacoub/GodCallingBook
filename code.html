<html dir="rtl">
<head>
    <title>الله يدعو</title>
    <meta charset=utf-8" />
	<link rel="icon" href="./assets/favicon.ico" sizes="32x32">
	<link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">
	<link rel="manifest" href="./assets/site.webmanifest">	
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <style>
	:root {
		color-scheme: light dark;
		--primary-color: light-dark(#333, #fafafa);
		--primary-background: light-dark(#e4e4e4, #121212);
        font-size: 2.5em;
	}
	.main {
		display: flex;
		justify-content: space-between;
	}
	.today-btn {
		position: fixed;
		left: 1em;
		bottom: 3em;
		transform: translate(-50%);
	}
	.next-day-btn {
		position: fixed;
		left: 1em;
		bottom: 4em;
		transform: translate(-50%);
	}
	.prev-day-btn {
		position: fixed;
		left: 1em;
		bottom: 2em;
		transform: translate(-50%);
	}
	.content {
		margin-right: 1.5em;
		margin-left: 2em;
	}
	.dark-mode-btn {
		position: fixed;
		bottom: 0;
		left: 1em;
		transform: translate(-50%);
	}
	.btn {
		cursor: pointer;
		user-select: none;
		font-size: 1.5em;
		opacity: 0.5;
	}
	.btn:hover {
		opacity: 1;
	}
	body {
		color: var(--primary-color);
		background-color: var(--primary-background);
		transition: color 0.4s, background-color 0.4s;
        font-family: Amiri, Times, serif;
		padding: 10px;
	}
    h1 {
		font-size: 1.3em;
    }
    p {
		text-indent: 0px;
    }
    </style>
	<script async src="./assets/tag.js?id=G-Y9EE502WZD"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-Y9EE502WZD');
		
		let currentDay = 0;
		let currentMonth = 0;

		function showDay(month, day) {
			let d = String(day).padStart(2, '0');
			let m = String(month).padStart(2, '0');

			fetch('./arabic/text/' + m + d + '.html')
			.then(x => x.text())
			.then(data => {
				document.querySelector('.content').innerHTML = data;
				currentDay = day;
				currentMonth = month;
			}).catch( e => console.log(e));
		}

		function showToday() {
			const d = new Date();
			showDay(d.getMonth()+1, d.getDate());
		}

		function showNextDay() {
            let daysInMonth = [ 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
            let daysInCurrentMonth = daysInMonth[currentMonth-1];
			let day = currentDay + 1;
			let month = currentMonth;

            if (day > daysInCurrentMonth)
            {
                month++;
			
				if (month > 12)
					month = 1;

                day = 1;
            }
			
			showDay(month, day);
		}

		function showPrevDay() {
            let daysInMonth = [ 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
            let daysInCurrentMonth = daysInMonth[currentMonth-1];
			let day = currentDay - 1;
			let month = currentMonth;

            if (day <= 0)
            {
                month--;

				if (month <= 0)
					month = 12;

                day = daysInMonth[month-1];
            }
			
			showDay(month, day);
		}

		window.onload = () => {
		
			showToday();

			let root = document.querySelector(':root');
			let darkModeButton = document.querySelector('.dark-mode-btn');
			let todayButton = document.querySelector('.today-btn');
			let nextDayButton = document.querySelector('.next-day-btn');
			let prevDayButton = document.querySelector('.prev-day-btn');

			todayButton.addEventListener('click', () => showToday());
			nextDayButton.addEventListener('click', () => showNextDay());
			prevDayButton.addEventListener('click', () => showPrevDay());

			darkModeButton.addEventListener('click', () => {
				//event.preventDefault();
				if (root.style.colorScheme == 'dark') {
					root.style.colorScheme = 'light';
					localStorage.setItem('theme', 'light');
				}
				else {
					root.style.colorScheme = 'dark';
					localStorage.setItem('theme', 'dark');
				}
			});
		};
	</script>
</head>
<body>
	<script>
		let theme = localStorage.getItem('theme');

		if (theme) {
			let root = document.querySelector(':root');
			root.style.colorScheme = theme;
		}
	</script>
	<div class="btn prev-day-btn">&#8680;</div>
	<div class="content">
	</div>
	<div class="btn next-day-btn">&#8678;</div>
	<div class="btn today-btn">&#8962;</div>
	<div class="btn dark-mode-btn">&#9728;</div>
</body>
</html>
