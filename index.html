<html dir="rtl">
<head>
    <title>الله يدعو</title>
    <meta charset=utf-8" />
	<meta name="description" content="كتاب الله يدعو - God Calling Book">
	<meta name="keywords" content="pdf كتاب الله يدعو , الله يدعو , God calling book">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<link rel="icon" href="./assets/favicon.ico" sizes="32x32">
	<link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">
	<link rel="manifest" href="./assets/site.webmanifest">	
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	<meta property="og:title" content="كتاب الله يدعو - God Calling" />
	<meta property="og:description" content="رسالة يومية من الرب يسوع نفسه" />
	<meta property="og:url" content="https://godcallingbook.com" />
	<meta property="og:image" content="https://godcallingbook.com/assets/godcalling.png" />

    <style>
	@media (max-width: 600px) {
		.calendar-months {
			grid-template-columns: auto auto auto auto !important;
		}
		.calendar-days {
			grid-template-columns: auto auto auto auto !important;
		}
	}
	@media (min-width: 768px) {
		.container {
			width: 750px;
		}
	}
	::-webkit-scrollbar {
	  width: 14px;
	}
	::-webkit-scrollbar-track {
	  box-shadow: inset 0 0 14px 14px transparent;
	  border: solid 4px transparent;
	}
	::-webkit-scrollbar-thumb {
	  box-shadow: inset 0 0 14px 14px #bbbbbe;
	  border: solid 4px transparent;
	  border-radius: 14px;
	}
	::-webkit-scrollbar-button {
	  display: none;
	}
	:root {
		color-scheme: light dark;
		--primary-color: light-dark(#333, #fafafa);
		--primary-background: light-dark(#e4e4e4, #121212);
        font-size: 24px;
	}
	html {
		height: 100%;
	}
	body {
		height: 100%;
		background-color: var(--primary-background);
		transition: color 0.4s, background-color 0.4s;
        font-family: Amiri, Times, serif;
		margin: 0px;
		/*overscroll-behavior: none;*/
	}
	.container {
		display: flex;
		flex-direction: column;
		height: 100vh;
		height: -webkit-fill-available;
		color: var(--primary-color);
		background-color: var(--primary-background);
		transition: color 0.4s, background-color 0.4s;
		margin-right: auto;
		margin-left: auto;
	}
	.header {
		height: 50px;
		display: flex;
		justify-content: space-between;
		padding: 10px 15px 0px 15px;
	}
	.content {
		flex: 1;
		overflow-y: auto;
		padding-right: 15px;
		padding-left: 15px;
		border-radius: 8px;
		margin: 15px;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
	}
	.footer {
		height: 50px;
		display: flex;
		justify-content: space-between;
		padding-right: 15px;
		padding-left: 15px;
	}
	.hidden {
		visibility: hidden;
	}
	.btn {
		cursor: pointer;
		user-select: none;
		font-size: 1.5em;
		text-align: center;
		opacity: 0.5;
	}
	.btn:hover {
		opacity: 1;
	}
	.gc-day {
		font-size: 1em;
		line-height: 1;
	}
    .gc-title {
		font-weight: bold;
		flex: 100%;
		text-align: center;
    }
	.gc-book {
		font-size: 1em;
		line-height: 1;
	}
    p {
		text-indent: 0px;
    }
	.calendar {
		position: fixed;
		left: 50%;
		transform: translate(-50%, 0);		
		display: grid;
		gap: 0.2em;
		bottom: 2em;
		padding: 0.2em;
		color: var(--primary-color);
		background-color: var(--primary-background);
		border-style: solid;
	}
	.calendar-months {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto;
		gap: 0.1em;
		font-size: 0.7em;
	}
	.calendar span {
		cursor: pointer;
		user-select: none;
		font-size: 1.5em;
		text-align: center;
		padding-left: 0.5em;
		padding-right: 0.5em;
	}
	.calendar span:hover {
		background-color: #a5a5a5;
		color: var(--primary-color);
		border: none;
		border-radius: 50%;
	}
	.calendar-days {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto auto auto;
		gap: 0.1em;
		font-size: 0.7em;
	}
	.selected-date {
		background-color: #e3165b;
		color: #fff;
		border: none;
		border-radius: 50%;
	}
    </style>
	<script async src="./assets/tag.js?id=G-Y9EE502WZD"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-Y9EE502WZD');

		let theme = localStorage.getItem('theme');

		if (theme) {
			let root = document.querySelector(':root');
			root.style.colorScheme = theme;
		}
		
		let part = 1;
		let parser = new DOMParser();

		const d = new Date();
		let currentDay = d.getDate();
		let currentMonth = d.getMonth()+1;
		const daysInMonth = [ 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];

		function switchBook() {
			if (part==1) {
				part = 2;
				document.querySelector('.gc-book').innerHTML = "الله في المساء";
			}
			else {
				part = 1;
				document.querySelector('.gc-book').innerHTML = "الله يدعو";
			}
			showDay(currentMonth, currentDay);
		}

		function showDay(month, day) {
			let d = String(day).padStart(2, '0');
			let m = String(month).padStart(2, '0');
			let url = part==1 ? './arabic/text/' : './arabic/text2/';

			fetch(url + m + d + '.xml')
			.then(x => x.text())
			.then(data => {
				let xmlDoc = parser.parseFromString(data, 'text/xml');
				document.querySelector('.gc-day').innerHTML = xmlDoc.getElementsByTagName('gc-day')[0].innerHTML;
				document.querySelector('.gc-title').innerHTML = xmlDoc.getElementsByTagName('gc-title')[0].innerHTML;
				document.querySelector('.content').innerHTML = xmlDoc.getElementsByTagName('gc-message')[0].innerHTML;
				document.querySelector('.content').scrollTop = 0;
				currentDay = day;
				currentMonth = month;
				updateCalendar();
			}).catch( e => console.log(e));
		}

		function showToday() {
			const d = new Date();
			showDay(d.getMonth()+1, d.getDate());
		}

		function showNextDay() {
            let daysInCurrentMonth = daysInMonth[currentMonth-1];
			let day = currentDay + 1;
			let month = currentMonth;

            if (day > daysInCurrentMonth)
            {
                month++;
			
				if (month > 12)
					month = 1;

                day = 1;
            }
			
			showDay(month, day);
		}

		function showPrevDay() {
            let daysInCurrentMonth = daysInMonth[currentMonth-1];
			let day = currentDay - 1;
			let month = currentMonth;

            if (day <= 0)
            {
                month--;

				if (month <= 0)
					month = 12;

                day = daysInMonth[month-1];
            }
			
			showDay(month, day);
		}
		
		function updateCalendar() {
			document.querySelectorAll('.calendar-months span').forEach((span, index) => {
				if (currentMonth - 1 == index) {
					span.classList.add('selected-date');
				}
				else {
					span.classList.remove('selected-date');
				}
			});
			document.querySelectorAll('.calendar-days span').forEach((span, index) => {
				if (currentDay - 1 == index) {
					span.classList.add('selected-date');
				}
				else {
					span.classList.remove('selected-date');
				}
				if (index >= daysInMonth[currentMonth-1] && index < 31) {
					span.classList.add('hidden');
				}
				else {
					span.classList.remove('hidden');
				}
			});
		}

		window.onload = () => {
		
			showDay(currentMonth, currentDay);

			let root = document.querySelector(':root');
			let calendar = document.querySelector('.calendar');
			let darkModeButton = document.querySelector('.dark-mode-btn');
			let bookButton = document.querySelector('.book-btn');
			let calendarButton = document.querySelector('.calendar-btn');
			let nextDayButton = document.querySelector('.next-day-btn');
			let prevDayButton = document.querySelector('.prev-day-btn');
			let homeButton = document.querySelector('.home-btn');
			let dayButton = document.querySelector('.gc-day');
			let bookTitleButton = document.querySelector('.gc-book');

			bookButton.addEventListener('click', () => switchBook());
			nextDayButton.addEventListener('click', () => showNextDay());
			prevDayButton.addEventListener('click', () => showPrevDay());
			calendarButton.addEventListener('click', () => calendar.classList.toggle('hidden'));
			homeButton.addEventListener('click', () => showToday());
			dayButton.addEventListener('click', () => calendar.classList.toggle('hidden'));
			bookTitleButton.addEventListener('click', () => switchBook());

			document.addEventListener('click', (e) => {
				if (!calendar.classList.contains('hidden') && !calendar.contains(e.target) && !e.target.classList.contains('btn'))
					calendar.classList.add('hidden');
			});

			darkModeButton.addEventListener('click', () => {
				//event.preventDefault();
				if (root.style.colorScheme == 'dark') {
					root.style.colorScheme = 'light';
					localStorage.setItem('theme', 'light');
				}
				else {
					root.style.colorScheme = 'dark';
					localStorage.setItem('theme', 'dark');
				}
			});
			
			let arabicMonths = ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو", "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
			let calendarMonths = document.querySelector('.calendar-months');
			
			arabicMonths.forEach((month, index) => {
				let span = document.createElement('span');
				span.textContent = month;
				span.addEventListener('click', () => showDay(index + 1, Math.min(currentDay, daysInMonth[index])));
				if (currentMonth - 1 == index) {
					span.classList.add('selected-date');
				}
				calendarMonths.appendChild(span);
			});
			
            let daysInCurrentMonth = daysInMonth[currentMonth-1];
			let calendarDays = document.querySelector('.calendar-days');
			let days = ["١", "٢", "٣", "٤", "٥", "٦", "٧", "٨", "٩", "١٠", "١١", "١٢", "١٣", "١٤", "١٥", "١٦", "١٧", "١٨", "١٩", "٢٠", "٢١", "٢٢", "٢٣", "٢٤", "٢٥", "٢٦", "٢٧", "٢٨", "٢٩", "٣٠", "٣١"];

			for (let index = 0; index < 31; index++) {
				let span = document.createElement('span');
				span.textContent = days[index];
				span.addEventListener('click', () => showDay(currentMonth, index + 1));
				if (currentDay - 1 == index) {
					span.classList.add('selected-date');
				}
				if (index >= daysInCurrentMonth) {
					span.classList.add('hidden');
				}
				calendarDays.appendChild(span);
			}
			calendarDays.appendChild(homeButton);
		};
	</script>
</head>
<body>
	<div class="container">
		<div class="header">
			<span class="btn gc-day"></span>
			<span class="gc-title"></span>
			<span class="btn gc-book">الله يدعو</span>
		</div>
		<div class="content">
		</div>
		<div class="footer">
			<span class="btn material-symbols-outlined prev-day-btn">line_end_arrow_notch</span>
			<span class="btn material-symbols-outlined book-btn">library_books</span></span>
			<span class="btn material-symbols-outlined calendar-btn">calendar_month</span>
			<span class="btn material-symbols-outlined dark-mode-btn">dark_mode</span>
			<span class="btn material-symbols-outlined next-day-btn">line_start_arrow_notch</span>
		</div>
	</div>
	<div class="calendar hidden">
		<div class="calendar-months">
		</div>
		<div class="calendar-days">
		</div>
		<span style="padding-top: .4em;" class="material-symbols-outlined home-btn">home</span>
	</div>
</body>
</html>
